<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="keywords" content="online documentation, web online help, web help, chm2web" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="generator" content="chm2web Pro 2.85 (unicode)" />

<meta http-equiv="Content-Language" content="en">
<title>Avoid using 'delete this'</title>
<link rel="stylesheet" href="../../../../files/helpindex.css" type=
"text/css">
<link rel="stylesheet" href="../../../../default.css" type=
"text/css">

<script type="text/JavaScript" src="../../../../files/supply.js"></script>
<script type="text/JavaScript">
chmtop.c2wtopf.pageid = "60010/60017/66069/8004.htm";
</script>

</head>
<body><script type="text/JavaScript"> 
if (window.name != "content") 
  document.write(" <table width=\"100%\" bgcolor=\"#e1e1e1\"cellspacing=\"2\" cellpadding=\"0\" style=\"border-collapse: collapse; font-family: sans-serif; font-size: 14px; color: #000000; text-decoration: none;  \"> <tr> <td align=\"center\" style=\"border-bottom: 2px solid gray\" > <br>&nbsp;Click <a href=\"../../../../index.html?page=source%2F60010%2F60017%2F66069%2F8004.htm\">here</a> to show toolbars of the Web Online Help System: <a href=\"../../../../index.html?page=source%2F60010%2F60017%2F66069%2F8004.htm\">show toolbars</a><br>&nbsp;</td></tr></table><br> "); 
</script>
<!-- !chm2web! -->

<h4>Avoid using 'delete this'</h4>

<hr>

<h5>Technology</h5>

<p>C++</p>

<h5>Unified Status</h5>

<p>N/A</p>

<h5>XXL Status</h5>

<p>N/A</p>

<h5>Critical Quality Rule</h5>

<p>No</p>

<h5>Weight in Parent Tech. Criterion</h5>

<p>8</p>

<h5>Rationale</h5>

<p>'delete this' leaves the current instance in a "dangling" state,
which may lead to undefined behavior. 'delete this' is only valid
if you can guarantee that the instance members will no longer be
accessed. Furthermore, 'delete this' is only valid if you can
guarantee the object was allocated using the 'new' operator. There
are acceptable patterns of code where delete this is used. For
instance, when a class is always dynamically allocated, only
referenced by a manager, and unregisters itself from the manager on
destruction. It is possible for an instance of the class to "commit
suicide" by using 'delete this' when it discovers it is no longer
needed. However this pattern and its implication are usually not
well understood, and other solutions are preferred.</p>

<h5>Description</h5>

<p>This rule searches for C++ Methods/Constructors/Destructors
using 'delete this'.</p>

<h5>Remediation</h5>

<p>The simplest solution is not to use 'delete this' at all.
Objects allocated on the stack have their destructors invoked when
the object goes out of scope.</p>

<h5>Reference</h5>

<p>"CERT: Avoid deleting
this":https://www.securecoding.cert.org/confluence/display/cplusplus/OOP05-CPP.+Avoid+deleting+this</p>

<h5>Sample</h5>

<pre>
class SomeClass 
{
public:
    void doSomething();
    void destroy();
    // ...
};

void SomeClass::destroy() 
{
    delete this;  // Dangerous!!
}

// ...

SomeClass sc;
// ...
sc.destroy(); // Undefined behavior
</pre>

<h5>Output</h5>

<p>Associated to each C++ Method with violations, the Quality Rule
provides: - The number of violation patterns - Bookmarks for
violation patterns found in the source code: - 'delete this'</p>

<h5>Total</h5>

<p>Number of C++ Methods/Constructors/Destructors</p>

<h5>Metric ID</h5>

<p>8004</p>

<hr>

<p align="right"><a href="http://www.castsoftware.com" target=
"_blank"><img border="0" src="../../../cast.gif" alt="CAST Website"
width="174" height="21"></a>
</p>

<script type="text/JavaScript">
var fe = FindFrame("toc", top);
if ((fe != null) && (chmtop.c2wtopf.jstree != null)) {
  if (chmtop.c2wtopf.FITEMS[chmtop.c2wtopf.pagenum] != chmtop.c2wtopf.pageid)
    chmtop.c2wtopf.jstree.OpenTreeNode("source/" + chmtop.c2wtopf.pageid);
}
</script>

<!-- CHM2WEB -->
<!-- DO NOT DELETE OR MODIFY THIS CODE WITHOUT 
     WRITTEN PERMISSION OF A!K RESEARCH LABS -->
<table width="100%" cellspacing="0" cellpadding="0" 
style="margin-top: 0pt; border-collapse: collapse;"> 
<tr> <td align="right" style="background-color:white; border-top: 1px solid gray;"> 
<a href="http://chm2web.aklabs.com" target="_blank" style="font-family: sans-serif;  font-size: 11px; text-decoration: none;"><font color="gray">Converted from CHM to HTML with <b>chm2web Pro 2.85 (unicode)</b></font></a>
</td></tr></table> 
<!-- /CHM2WEB -->

</body>
</html>
